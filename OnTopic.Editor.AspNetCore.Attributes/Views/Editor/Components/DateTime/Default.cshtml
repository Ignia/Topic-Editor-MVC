@using OnTopic.Editor.AspNetCore.Attributes.DateTimeAttribute
@model DateTimeAttributeViewModel

@{
  Layout = "~/Areas/Editor/Views/Editor/Components/_Layout.cshtml";
  var includeDatePicker = Model.AttributeDescriptor.IncludeDatePicker?? true;
  var includeTimePicker = Model.AttributeDescriptor.IncludeTimePicker?? true;
}

<input
  type                          ="text"
  asp-for                       ="Value"
  class                         ="FormField Field form-control input-sm"
  placeholder                   =@Model.InheritedValue
  disabled                      =@(!Model.AttributeDescriptor.IsEnabled)
  required                      =@Model.AttributeDescriptor.IsRequired
/>

<script>
  window.addEventListener('DOMContentLoaded', function() {
    (function($) {

      //Instantiate date and/or time picker
      $('#@Html.IdFor(m => m.Value)')
        .@(includeDatePicker? "date" : "")@(includeTimePicker? "time" : "")picker({
          @if (includeDatePicker) {
            <text>
              dateFormat        : '@Model.AttributeDescriptor.DateFormat',
              defaultDate       : '@Model.ToDateString()',
            </text>
          }
          @if (includeDatePicker && includeTimePicker) {
            <text>
              separator         : '@Model.AttributeDescriptor.DateTimeSeparator',
            </text>
          }
          @if (includeTimePicker) {
            <text>
              timeFormat        : '@Model.AttributeDescriptor.TimeFormat',
              defaultTime       : '@Model.ToTimeString()',
            </text>
          }
          defaultValue          : '@Model.ToDateString() @Model.ToTimeString()'
        });

    })(jQuery);
  });
</script>